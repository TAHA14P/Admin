-- R6 Admin Script with ESP + Admin Tag + Simple UI
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

-- ===== Admin Tag =====
local function createAdminTag(player)
    local character = player.Character or player.CharacterAdded:Wait()
    local head = character:WaitForChild("Head")

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "AdminTag"
    billboard.Size = UDim2.new(0, 100, 0, 40)
    billboard.Adornee = head
    billboard.AlwaysOnTop = true
    billboard.StudsOffset = Vector3.new(0, 2.5, 0) -- above head

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.Text = "ADMIN"
    label.TextColor3 = Color3.fromRGB(255,0,0)
    label.Font = Enum.Font.SourceSansBold
    label.TextScaled = true
    label.Parent = billboard

    billboard.Parent = head
end

createAdminTag(LocalPlayer)

-- ===== ESP =====
local ESPFolder = Instance.new("Folder", Workspace)
ESPFolder.Name = "ESP"

local function createESP(obj, color)
    local rootPart = obj:FindFirstChild("HumanoidRootPart") or obj:FindFirstChild("Torso")
    if not rootPart then return end

    local box = Instance.new("BoxHandleAdornment")
    box.Adornee = rootPart
    box.Size = Vector3.new(2,5,1)
    box.Color3 = color
    box.AlwaysOnTop = true
    box.ZIndex = 10
    box.Transparency = 0.5
    box.Parent = ESPFolder
end

local function updateESP()
    ESPFolder:ClearAllChildren()

    -- Players
    for _, plr in pairs(Players:GetPlayers()) do
        if plr.Character and plr.Character:FindFirstChild("Torso") then
            local color = (plr == LocalPlayer) and Color3.fromRGB(255,0,0) or Color3.fromRGB(0,0,255)
            createESP(plr.Character, color)
        end
    end

    -- NPCs
    for _, npc in pairs(Workspace:GetChildren()) do
        if npc:IsA("Model") and npc:FindFirstChild("Humanoid") and not Players:FindFirstChild(npc.Name) then
            createESP(npc, Color3.fromRGB(0,255,0))
        end
    end
end

RunService.RenderStepped:Connect(updateESP)

-- ===== Simple UI =====
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AdminUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0,250,0,150)
Frame.Position = UDim2.new(0,10,0,50)
Frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
Frame.BackgroundTransparency = 0.2
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,0,30)
Title.Position = UDim2.new(0,0,0,0)
Title.BackgroundTransparency = 1
Title.Text = "Admin Panel"
Title.TextColor3 = Color3.fromRGB(255,0,0)
Title.Font = Enum.Font.SourceSansBold
Title.TextScaled = true
Title.Parent = Frame

-- ===== Buttons =====
local function createButton(name, callback, yPos)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-20,0,30)
    btn.Position = UDim2.new(0,10,0,yPos)
    btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = name
    btn.Font = Enum.Font.SourceSansBold
    btn.TextScaled = true
    btn.Parent = Frame
    btn.MouseButton1Click:Connect(callback)
end

createButton("Reset Character", function()
    LocalPlayer.Character:BreakJoints()
end, 40)

createButton("WalkSpeed 50", function()
    if LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = 50
    end
end, 80)

createButton("Fly", function()
    local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
    if hum then hum.PlatformStand = true end
end, 120)
